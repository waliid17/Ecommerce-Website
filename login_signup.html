<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pro-outil</title>
   <!-- Favicon -->
   <link rel="icon" href="images/e.png" type="image/png">
  <!-- google font -->
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,900&display=swap"
    rel="stylesheet" />
  <!-- boxicons -->
  <link href="https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet" />
  <!-- app css -->
  <link rel="stylesheet" href="login.css" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>

<body style="display: flex; flex-direction: column; min-height: 100vh">

  <!-- header -->
  <header>
    <!-- mobile menu -->
    <div class="mobile-menu bg-second">
      <div class="logo">
        <img src="images/prooutil.gif" alt="LOGO" />
      </div>
      <span class="mb-menu-toggle" id="mb-menu-toggle">
        <i class="bx bx-menu"></i>
      </span>
    </div>
    <!-- end mobile menu -->
    <!-- main header -->
    <div class="header-wrapper" id="header-wrapper">
      <span class="mb-menu-toggle mb-menu-close" id="mb-menu-close">
        <i class="bx bx-x"></i>
      </span>
      <!-- mid header -->
      <div class="bg-main">
        <div class="mid-header container">
          <div class="logo">
            <a href="index.php"><img src="images/prooutil.gif" alt="LOGO" /></a>
          </div>
          <div class="search">
            <input type="text" placeholder="Search" />
            <i class="bx bx-search-alt"></i>
          </div>
          <ul class="user-menu">
            <li>
              <a href="#"><i class="bx bx-bell"></i></a>
            </li>
            <li>
              <a id="showDivButton" href="#"><i class="bx bx-user-circle"></i></a>
            </li>
            <li>
              <a href="#"><i class="bx bx-cart"></i></a>
            </li>
          </ul>
        </div>
      </div>
      <!-- end mid header -->
      <!-- bottom header -->
      <div class="">
        <div class="bottom-header container">
          <ul class="main-menu">
            <li><a href="index.php">ACCUEIL</a></li>
            <!-- mega menu -->
            <li><a href="products.php">OUTILS</a>
            </li>
            <!-- end mega menu -->
            <li><a href="#">à propos</a></li>
            <li><a href="#">contact</a></li>
          </ul>
        </div>
      </div>
      <!-- end bottom header -->
    </div>
    <!-- end main header -->
  </header>
  <!-- end header -->

  <div class="grid">
    <div></div>
    <div class="formContainer" style="flex: 1">
      <div class="wrapper">
        <div class="title-text">
          <div class="title login">Account</div>
          <div class="title signup">Account</div>
        </div>
        <div class="form-container">
          <div class="slide-controls">
            <input type="radio" name="slide" id="login" checked />
            <input type="radio" name="slide" id="signup" />
            <label for="login" class="slide login">Connexion</label>
            <label for="signup" class="slide signup">Inscription</label>
            <div class="slider-tab"></div>
          </div>
          <div class="form-inner">
            <form action="login.php" method="post" class="login">
              <div class="field">
                <div class="icon">
                  <i class="fa-solid fa-user"></i>
                </div>
                <input type="email" placeholder="Email Address" required name="email" />
              </div>
              <div class="field">
                <div class="icon">
                  <i class="fa-solid fa-lock"></i>
                </div>
                <input id="password_login" type="password" placeholder="Password" required name="mot_de_passe" /><i
                  class="far fa-eye toggle-password" id="toggle-password3"></i>
              </div>
              <div class="pass-link">
                <a href="forgot_password.html">Mot de passe oublié ?</a>
              </div>
              <div class="field btn">
                <div class="btn-layer"></div>
                <input type="submit" value="Connexion" />
              </div>
              <div class="signup-link">
                Don't Have Account?
                <a href="?slide=signup"> Inscrivez-vous</a>
              </div>
            </form>
            <div id="toast-container"></div>

            <script>
              function showToast(message, iconClass) {
                  const toastContainer = document.getElementById('toast-container');
          
                  // Create toast element
                  const toast = document.createElement('div');
                  toast.className = 'toast';
          
                  // Add message and progress bar with an icon
                  toast.innerHTML = `
                      <div class="toast-content">
                          <i class="${iconClass} toast-icon"></i>
                          <div class="toast-message">${message}</div>
                      </div>
                      <div class="progress-bar" id="progress-bar"></div>
                  `;
          
                  toastContainer.appendChild(toast);
          
                  // Show the toast
                  setTimeout(() => {
                      toast.classList.add('show');
                      // Set progress bar width to 100% over 5 seconds
                      const progressBar = document.getElementById('progress-bar');
                      progressBar.style.width = '100%';
                  }, 100);
          
                  // Hide the toast after 5 seconds
                  setTimeout(() => {
                      toast.classList.add('hide');
                      // Remove the toast after animation
                      setTimeout(() => {
                          toast.remove();
                      }, 300);
                  }, 5000);
              }
          
              window.onload = function () {
                  const urlParams = new URLSearchParams(window.location.search);
                  const error = urlParams.get('error');
          
                  if (error === 'mdp') {
                      showToast('Mot de passe incorrect !', 'fas fa-exclamation-circle');
                  } else if (error === 'email') {
                      showToast("L'email n'existe pas !", 'fas fa-exclamation-triangle');
                  }
              };
          </script>
          
            </head>

            <body>
              <form id="signupForm" class="signup">
                <div class="field">
                  <input type="text" placeholder="Prénom" required name="prenom" />
                </div>
                <div class="field">
                  <input type="text" placeholder="Nom" required name="nom" />
                </div>
                <div class="field">
                  <input type="tel" placeholder="Numéro de téléphone" required name="telephone" />
                </div>
                <div class="field">
                  <input type="text" placeholder="Entrez votre adresse" required name="adresse" />
                </div>
                <div class="field">
                  <input type="email" placeholder="Email Address" required name="email" />
                </div>
                <div class="field">
                  <input type="password" id="password" placeholder="Password" required name="mot_de_passe" />
                  <i class="far fa-eye toggle-password" id="toggle-password1"></i>
                </div>
                <div class="field">
                  <input type="password" id="confirm-password" placeholder="Confirm Password" required
                    name="confirm_password" />
                  <i class="far fa-eye toggle-password" id="toggle-password2"></i>
                </div>
                <div id="mismatch-message">
                  <i class="fas fa-exclamation-circle icon"></i> Les mots de passe ne correspondent pas.
                </div>
                <div class="field btn">
                  <div class="btn-layer"></div>
                  <input type="submit" value="S’inscrire" />
                </div>
              </form>
              <!-- Modal Structure -->
              <div id="myModal" class="modal">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <span id="closeModalBtn" class="close">&times;</span>
                    <div class="modal-body">
                      <div class="modal-icon">
                        <!-- Success Icon SVG -->
                        <svg viewBox="0 0 24 24" class="success-icon" xmlns="http://www.w3.org/2000/svg">
                          <circle cx="12" cy="12" r="10" fill="none" stroke="#ff840a" stroke-width="2" />
                          <path d="M7 12l3 3 7-7" fill="none" stroke="#ff840a" stroke-width="2" />
                        </svg>
                      </div>
                      <h2>Succès</h2> 
                      <p>Votre compte a été créé avec succès.</p> 
                      <p>Un lien d'activation a été envoyé à votre adresse email.</p>
                    </div>
                    <div class="modal-footer">
                      <button class="btn btn-ok">OK</button>
                    </div>
                  </div>
                </div>
              </div>

              <script>
                // Get modal elements
                const modal = document.getElementById('myModal');
                const closeModalBtn = document.getElementById('closeModalBtn');
                const okButton = document.querySelector('.btn-ok');

                // Handle form submission
                document.getElementById('signupForm').onsubmit = function (event) {
                  event.preventDefault(); // Prevent the default form submission

                  const formData = new FormData(this);

                  fetch('signup.php', {
                    method: 'POST',
                    body: formData
                  })
                    .then(response => response.json())
                    .then(data => {
                      if (data.status === 'success') {
                        // Show the modal
                        modal.style.display = 'block';
                        setTimeout(() => modal.style.opacity = '1', 10);
                      } else {
                        // Handle errors (optional: show a different message or alert)
                        alert(data.message);
                      }
                    })
                    .catch(error => {
                      console.error('Error:', error);
                    });
                };

                // Close modal function with redirect
                function closeModal() {
                  modal.style.opacity = '0';
                  setTimeout(() => {
                    modal.style.display = 'none';
                    window.location.href = 'login_signup.html'; // Redirect to index.php
                  }, 300);
                }

                // Close modal when clicking the close button
                closeModalBtn.onclick = closeModal;

                // Close modal when clicking the OK button and redirect
                okButton.onclick = closeModal;

                // Close modal when clicking outside of modal content
                window.onclick = function (event) {
                  if (event.target === modal) {
                    closeModal();
                  }
                };
              </script>


          </div>
        </div>
      </div>
    </div>
  </div>

 <!-- footer -->
 <footer class="bg-second">
  <div class="container">
      <div class="row">
          <div class="col-3 col-md-6">
              <h3 class="footer-head">SERVICES</h3>
              <ul class="menu">
                  <li><a href="products.php">Nos Outils</a></li>
                  <li><a href="#contact">Contact</a></li>
                  <li><a href="#bloge">À propos</a></li>
              </ul>
          </div>
          <div class="col-3 col-md-6">
              <h3 class="footer-head">Nos Avantages</h3>
              <ul class="menu">
                  <li>Livraison Rapide</li>
                  <li>Des Outils De Marque</li>
                  <li>Garantie</li>
              </ul>
          </div>
          <div class="col-3 col-md-6">
              <h3 class="footer-head">CONTACTEZ NOUS</h3>
              <ul class="menu">
                  <li>Algérie, Alger, Route de bridja, Staoueli</li>
                  <li>
                      <i class="bx bx-phone-call"></i>
                      : 055******** 7/7J 24/24H
                  </li>

                  <ul>
                      <li>
                          <i class="bx bx-envelope"></i>
                          : prooutil00@gmail.com
                      </li>
                  </ul>

              </ul>
          </div>
          <div class="col-3 col-md-6 col-sm-12">
              <div class="contact">
                  <h3 class="contact-header">
                      <img src="images/prooutil1.png" alt="LOGO">
                  </h3>
                  <ul class="contact-socials">
                      <li><a href="#">
                              <i class='bx bxl-facebook-circle'></i>
                          </a></li>
                      <li><a href="#">
                              <i class='bx bxl-instagram-alt'></i>
                          </a></li>
                      <li><a href="#">
                              <i class='bx bxl-youtube'></i>
                          </a></li>
                      <li><a href="#">
                              <i class='bx bxl-twitter'></i>
                          </a></li>
                  </ul>
              </div>
              <div class="subscribe">
                  <input type="email" placeholder="ENTER YOUR EMAIL">
                  <button>subscribe</button>
              </div>
          </div>
      </div>
  </div>
</footer>
<!-- end footer -->

  <!-- app js -->
  <script src="./js/app.js"></script>
  <script src="./js/index.js"></script>
  <script src="login.js"></script>
  <script>
    document
      .getElementById("showDivButton")
      .addEventListener("click", function () {
        document.getElementById("fixedDiv").classList.toggle("hidden");
      });
    document.addEventListener("DOMContentLoaded", (event) => {
      const password = document.getElementById("password");
      const confirmPassword = document.getElementById("confirm-password");
      const mismatchMessage = document.getElementById("mismatch-message");
      const password_login = document.getElementById("password_login");

      const checkPasswords = () => {
        if (
          password.value &&
          confirmPassword.value &&
          password.value !== confirmPassword.value
        ) {
          mismatchMessage.style.display = "block";
        } else {
          mismatchMessage.style.display = "none";
        }
      };

      password.addEventListener("input", checkPasswords);
      confirmPassword.addEventListener("input", checkPasswords);

      const togglePassword1 = document.getElementById("toggle-password1");
      const togglePassword2 = document.getElementById("toggle-password2");
      const togglePassword3 = document.getElementById("toggle-password3");

      const togglePasswordVisibility = (passwordField, toggleIcon) => {
        if (passwordField.type === "password") {
          passwordField.type = "text";
          toggleIcon.classList.remove("fa-eye");
          toggleIcon.classList.add("fa-eye-slash");
        } else {
          passwordField.type = "password";
          toggleIcon.classList.remove("fa-eye-slash");
          toggleIcon.classList.add("fa-eye");
        }
      };

      togglePassword1.addEventListener("click", () =>
        togglePasswordVisibility(password, togglePassword1)
      );

      togglePassword2.addEventListener("click", () =>
        togglePasswordVisibility(confirmPassword, togglePassword2)
      );
      togglePassword3.addEventListener("click", () =>
        togglePasswordVisibility(password_login, togglePassword3)
      );
    });
  </script>
</body>
<style>
.user-menu {
  visibility: hidden;
}
.subscribe {
  visibility: hidden;
}
</style>

</html>